<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>
  <ui:composition template="/layouts/frame-10-full-width.xhtml">
    <ui:define name="title">AudioInput</ui:define>
    <ui:define name="content">

      <h3>
        This is an 
        <a href="https://developer.axonivy.com/doc/">Html Dialog</a>
        implemented with JSF and <a href="http://primefaces.org/">Primefaces</a> as widget library
      </h3>

      <h:form id="form">
        <p:messages />
        <h:panelGroup layout="block" id="audioPanel">
        
           <p:commandButton 
      type="button" 
      value="Aufnahme starten" 
      icon="pi pi-microphone" 
      styleClass="p-button-success" 
      onclick="startRecording()" />
      
      <p:commandButton 
      type="button" 
      value="Aufnahme stoppen" 
      icon="pi pi-stop" 
      styleClass="p-button-danger" 
      onclick="stopRecording()" />
      
      <audio id="audioPlayback" controls="controls" style="margin-top:1rem; width:100%;"></audio>

    <!-- Base64 audio data -->
    <h:inputHidden id="audioData" value="#{audioBean.audioBase64}" />

    <p:separator />

    <p:commandButton 
      value="Speichern" 
      icon="pi pi-save" 
      action="#{audioBean.saveAudio}" 
      onclick="return prepareSubmit()" 
      styleClass="p-button-primary" />

<!--         <button type="button" onclick="startRecording()">Aufnahme starten</button> -->
<!--         <button type="button" onclick="stopRecording()">Aufnahme stoppen</button> -->
<!--         <audio id="audioPlayback" controls="controls"></audio> -->


<!--         Base64 Audiodaten speichern -->
<!--         <h:inputHidden id="audioData" value="#{audioBean.audioBase64}" /> -->

<!--         Submit Button -->
<!--         <h:commandButton value="Speichern"  -->
<!--                  action="#{audioBean.saveAudio}" -->
<!--                  onclick="return prepareSubmit()" /> -->

    </h:panelGroup>
        <br />
        <div class="command-btns">
          <p:commandLink id="cancel" actionListener="#{ivyWorkflowView.cancel()}" process="@this" value="Cancel" />
          <p:commandButton id="proceed" actionListener="#{logic.close}" value="Proceed" update="form" icon="pi pi-check" />
        </div>
      </h:form>
		<h:outputScript library="js" name="audio-recorder.js"/>
    </ui:define>
  </ui:composition>
</h:body>

</html>
